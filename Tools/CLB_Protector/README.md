# CLB Protector
The CLB Protector is a Java project, which is responsible for computing the signature-verification digests  of AT checks and encrypting the CLBs.
The CLB Protector works directly on the elf file, compiled after the protection performed by [CLB Injector](../CLB_Injector/README.md). 

In particular, this tool is responsible to:
* Encrypt the new function
* Replace the hex placeholder in the elf file.

## Prerequisites
The CLB Protector need that at least java 11 is installed. 

On Ubuntu 20.04:
```
$ java --version
openjdk 11.0.11 2021-04-20
OpenJDK Runtime Environment (build 11.0.11+9-Ubuntu-0ubuntu2.20.04)
OpenJDK 64-Bit Server VM (build 11.0.11+9-Ubuntu-0ubuntu2.20.04, mixed mode, sharing)
```

> NB: The *CLB Protector* is tested with the java version 11. Different version could lead to different results.

## Build
We use maven to build the jar file from this project:
```
$ mvn clean compile assembly:single
$ ls target/
CLB_Protector-1.0-SNAPSHOT-jar-with-dependencies.jar
[...]
```

## Usage
```
usage: CLB Protector
 -ed,--encryption-details <arg>   The encryption details file generated by
                                  the CLB Injector
 -i,--input <arg>                 The elf input file
 -od,--other-details <arg>        The other details file generated by the
                                  CLB Injector
```